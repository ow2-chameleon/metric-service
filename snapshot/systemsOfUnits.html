
<!DOCTYPE html>
<!--
 Generated by Apache Maven Doxia at 2013-08-12
 Rendered using Maven Reflow Skin 1.0.0 (http://andriusvelykis.github.com/reflow-maven-skin)
-->
<html  xml:lang="en" lang="en">

	<head>
		<meta charset="UTF-8" />
		<title>System of units and retrieving units | OW2 Chameleon - Metric Service</title>
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<meta name="description" content="" />
		<meta http-equiv="content-language" content="en" />

		<link href="./css/bootstrap.min.css" rel="stylesheet" />
		<link href="./css/bootstrap-responsive.min.css" rel="stylesheet" />
		<link href="./css/docs.css" rel="stylesheet" />
		<link href="./css/reflow-skin.css" rel="stylesheet" />
		
		<link href="http://yandex.st/highlightjs/7.3/styles/github.min.css" rel="stylesheet" />
		
		<link href="./css/lightbox.css" rel="stylesheet" />
		
		<link href="./css/site.css" rel="stylesheet" />
		<link href="./css/print.css" rel="stylesheet" media="print" />
		
		<!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
		<!--[if lt IE 9]>
			<script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
		<![endif]-->
		
<link rel="stylesheet" href="css/font-awesome.css"/>
<link rel="stylesheet" type="text/css" media="screen" href="css/orange.css"/>
<link rel="stylesheet" type="text/css" media="screen" href="css/style.css"/>
	</head>

	<body class="page-systemsofunits project-metric-service" data-spy="scroll" data-offset="60" data-target="#toc-scroll-target">

		<div class="navbar navbar-fixed-top navbar-inverse">
			<div class="navbar-inner">
				<div class="container">
					<a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
						<span class="icon-bar"></span>
						<span class="icon-bar"></span>
						<span class="icon-bar"></span>
					</a>
					<a class="brand" href="index.html"><span class="color-highlight">OW2 Chameleon</span> ~ Metric Service</a>
					<div class="nav-collapse">
						<ul class="nav pull-right">
							<li><a href="downloads.html" title="Download">Download </a></li>
							<li><a href="http://github.com/ow2-chameleon/metric-service" title="GitHub project" class="externalLink">GitHub project </a></li>
							<li class="dropdown active">
								<a href="#" class="dropdown-toggle" data-toggle="dropdown">Documentation <b class="caret"></b></a>
								<ul class="dropdown-menu">
									<li><a href="measures.html" title="Measures">Measures </a></li>
									<li><a href="quantities.html" title="Quantities">Quantities </a></li>
									<li><a href="units.html" title="Units">Units </a></li>
									<li class="active"><a href="" title="Systems of units">Systems of units </a></li>
									<li><a href="apidocs/index.html" title="API">API </a></li>
								</ul>
							</li>
							<li class="dropdown">
								<a href="#" class="dropdown-toggle" data-toggle="dropdown">Contribute <b class="caret"></b></a>
								<ul class="dropdown-menu">
									<li><a href="contribution.html" title="Contribute">Contribute </a></li>
									<li><a href="source-repository.html" title="Sources">Sources </a></li>
									<li><a href="http://github.com/ow2-chameleon/metric-service/issues/" title="Issues" class="externalLink">Issues </a></li>
									<li><a href="http://github.com/ow2-chameleon/metric-service" title="Fork on GitHub" class="externalLink">Fork on GitHub </a></li>
								</ul>
							</li>
						</ul>
					</div><!--/.nav-collapse -->
				</div>
			</div>
		</div>
		
	<div class="container">
	
	<!-- Masthead
	================================================== -->
	</header>

	<div class="main-body">
	<div class="row">
		<div class="span8">
			<div class="body-content">
<div class="page-header">
 <h1 id="system_of_units_and_retrieving_units">System of units and retrieving units</h1>
</div> 
<p>The <code>org.ow2.chameleon.metric.MetricService</code> is the entry point of the API. From this object, you can retrieve the units and systems of units and convert quantities.</p> 
<h2 id="accessing_the_metric-service_instance">Accessing the metric-service instance</h2> 
<p>The metric-service instance is a singleton. To access it, use:</p> 
<pre><code>MetricService service = MetricService.getInstance();
</code></pre> 
<p>On OSGi, avoid using <code>MetricService.getInstance()</code> in favor to the <code>org.ow2.chameleon.metric.MetricService</code> OSGi service.</p> 
<pre><code>ServiceReference ref = bundleContext
    .getServiceReference(&quot;org.ow2.chameleon.metric.MetricService&quot;);
if (ref != null) {
    MetricService service = bundleContext.getService(ref);
}
</code></pre> 
<p>Or with iPOJO:</p> 
<pre><code>@Requires
private MetricService service;
</code></pre> 
<h2 id="accessing_systems_of_units">Accessing systems of units</h2> 
<p>A system of units is a set of units which are chosen as the reference scales for some set of quantity kinds together with the definitions of each unit. Units may be defined by experimental observation or by proportion to another unit not included in the system. Not all units are included in systems, but most of them are.</p> 
<p>Including units in a system have several advantages. It let you retrieve a units from its name or symbol, and create a set of consistent units handling a set of quantity kinds.</p> 
<p>System have a unique name to identify them. For instance the international system can be retrieved using the <code>SI</code> name:</p> 
<pre><code>MetricService.getInstance().getSystemOfUnits(&quot;SI&quot;);
// or
MetricService.getInstance().getSystemOfUnits(SI.getName()));
</code></pre> 
<h2 id="provided_systems_of_units">Provided systems of units</h2> 
<p>The library includes a set of systems:</p> 
<ul> 
 <li>the SI system including most of the regular physical units (name: <code>SI</code>)</li> 
</ul> 
<h2 id="retrieving_units">Retrieving units</h2> 
<p>You can retrieve a unit either by its name or symbol. Be aware that when possible, we use UTF-8 character as symbol.</p> 
<pre><code>Unit&lt;Illuminance&gt; lux = MetricService.getInstance().getSystemOfUnits(&quot;SI&quot;).getUnitBySymbol(&quot;lx&quot;);
Unit&lt;Force&gt; newton = MetricService.getInstance().getSystemOfUnits(&quot;SI&quot;).getUnitByName(&quot;newton&quot;);
</code></pre> 
<p>However, this approach is quite cumbersome, so most of the units are also defined in the <em>quantity kind</em> classes. For instance the classes from the previous snippet are <code>Illuminance</code> and <code>Force</code>.</p> 
<pre><code>Unit&lt;Illuminance&gt; lux = Illuminance.LUX;
Unit&lt;Force&gt; newton = Force.NEWTON;
</code></pre> 
<p>When creating quantities, we generally use this second approach.</p> 
<h2 id="creating_a_system_of_units">Creating a system of units</h2> 
<p>You can create your own system of units. It will be registered in the metric-service and retrieved as the default ones. To implement a system of units, extend the <code>org.ow2.chameleon.metric.DefaultSystemOfUnits</code> class.</p> 
<pre><code>            public class MySystem extends DefaultSystemOfUnits {

            public MySystem() {
                super(&quot;MySystem&quot;, getDimensions()), getPrefixMapping());

                // Add the units
                this.addUnitToSystem(
                    new Unit&lt;Angle&gt;(&quot;grad&quot;, &quot;grad&quot;, Dimension.NONE));
            }
</code></pre> 
<p>The constructor must call the super constructor with three parameters:</p> 
<ul> 
 <li>the name of the system (<code>MySystem</code>)</li> 
 <li>the dimensions used by the system (can be <code>null</code>)</li> 
 <li>the list of prefix handled by the system</li> 
</ul> 
<p>Dimensions are used to determine if two units are compatible (two units are compatible is they have the very same dimensions). If you don’t provide dimensions, all your units will be considered dimension-less.</p> 
<p>Prefixes allows configuring <em>prefixed</em> unit. For example kilometer (<em>km</em>) is a prefixed unit with <em>k</em> as prefix and <em>m</em> as unit. When configured, all units added to the system are extended with the prefixed units. In the SI system, adding metre automatically generates km, hm, dm, cm, mm…. Each prefix specifies its name, prefix symbol and factor. For example the SI prefixes are:</p> 
<pre><code>public static List&lt;Prefix&gt; getSIPrefixMapping() {
    List&lt;Prefix&gt; prefixes = new ArrayList&lt;Prefix&gt;();
    prefixes.add(new Prefix(&quot;tera&quot;, &quot;T&quot;, 1000000000000l));
    prefixes.add(new Prefix(&quot;giga&quot;, &quot;G&quot;, 1000000000l));
    prefixes.add(new Prefix(&quot;mega&quot;, &quot;M&quot;, 1000000));
    prefixes.add(new Prefix(&quot;giga&quot;, &quot;k&quot;, 1000));
    prefixes.add(new Prefix(&quot;hecto&quot;, &quot;h&quot;, 100));
    prefixes.add(new Prefix(&quot;deci&quot;, &quot;d&quot;, 0.1));
    prefixes.add(new Prefix(&quot;centi&quot;, &quot;c&quot;, 0.01));
    prefixes.add(new Prefix(&quot;milli&quot;, &quot;m&quot;, 0.001));
    prefixes.add(new Prefix(&quot;micro&quot;, &quot;\u00B5&quot;, 0.000001));
    prefixes.add(new Prefix(&quot;nano&quot;, &quot;n&quot;, 0.000000001));
    prefixes.add(new Prefix(&quot;pico&quot;, &quot;p&quot;, 0.000000000001));
    return prefixes;
}
</code></pre> 
<p>Once the super constructor is called, you can add the units to your system. To know more on how to create units, read the <a href="units.html">units</a> page.</p> 
<p>The created system must be registered to the metric service singleton to be retrieved by tiers:</p> 
<pre><code>MetricService.getInstance().addSystemOfUnits(mySystem);
</code></pre> 
<p>On OSGi, don’t forget to remove it when the bundle declaring the system is uninstalled.</p>
			</div>
		</div>
		<div class="span4">
			<div id="toc-sidebar">
				<div class="well">
					<ul class="nav nav-list">
						<li class="nav-header">Table of Contents</li>
		<li class="dropdown"><a href="#system_of_units_and_retrieving_units" title="System of units and retrieving units">System of units and retrieving units <b class="caret"></b></a>
			<ul class="nav nav-list">
		<li><a href="#accessing_the_metric-service_instance" title="Accessing the metric-service instance">Accessing the metric-service instance</a>
		<li><a href="#accessing_systems_of_units" title="Accessing systems of units">Accessing systems of units</a>
		<li><a href="#provided_systems_of_units" title="Provided systems of units">Provided systems of units</a>
		<li><a href="#retrieving_units" title="Retrieving units">Retrieving units</a>
		<li><a href="#creating_a_system_of_units" title="Creating a system of units">Creating a system of units</a>
				<li class="divider"></li>
			</ul>
		</li>
					</ul>
				</div>
			</div>
		</div>
	</div>
	</div>

	</div><!-- /container -->
	
	<!-- Footer
	================================================== -->
	<footer class="well">
		<div class="container">
			<div class="row">
				<div class="span3 bottom-nav">
					<ul class="nav nav-list">
						<li class="nav-header">Main</li>
						<li>
							<a href="./" title="Home">Home </a>
						</li>
						<li>
							<a href="http://github.com/ow2-chameleon/metric-service" title="GitHub project" class="externalLink">GitHub project </a>
						</li>
						<li>
							<a href="github-report.html" title="Release notes">Release notes </a>
						</li>
						<li class="nav-header">Download</li>
						<li>
							<a href="downloads.html" title="Download">Download </a>
						</li>
						<li>
							<a href="license.html" title="License">License </a>
						</li>
					</ul>
				</div>
				<div class="span3 bottom-nav">
					<ul class="nav nav-list">
						<li class="nav-header">Contribute</li>
						<li>
							<a href="contribution.html" title="Contribute">Contribute </a>
						</li>
						<li>
							<a href="source-repository.html" title="Sources">Sources </a>
						</li>
						<li>
							<a href="http://github.com/ow2-chameleon/metric-service/issues/" title="Issues" class="externalLink">Issues </a>
						</li>
						<li>
							<a href="http://github.com/ow2-chameleon/metric-service" title="Fork on GitHub" class="externalLink">Fork on GitHub </a>
						</li>
					</ul>
				</div>
				<div class="span3 bottom-nav">
					<ul class="nav nav-list">
						<li class="nav-header">Documentation</li>
						<li>
							<a href="measures.html" title="Measures">Measures </a>
						</li>
						<li>
							<a href="quantities.html" title="Quantities">Quantities </a>
						</li>
						<li>
							<a href="units.html" title="Units">Units </a>
						</li>
						<li class="active">
							<a href="#" title="Systems of units">Systems of units </a>
						</li>
						<li>
							<a href="apidocs/index.html" title="API">API </a>
						</li>
					</ul>
				</div>
				<div class="span3 bottom-description">
					<blockquote><span class="color-highlight">OW2 Chameleon</span> ~ metric service is a simple library to manipulate measures,
          units and dimensions.</blockquote>
				</div>
			</div>
		</div>
	</footer>
		
	<div class="container subfooter">
		<div class="row">
			<div class="span12">
				<p class="pull-right"><a href="#">Back to top</a></p>
				<p class="copyright">Copyright &copy;2009-2013 <a href="http://ow2.org">OW2 Chameleon</a>. All Rights Reserved.</p>
				<p class="version-date"><span class="projectVersion">Version: 1.0.0-SNAPSHOT. </span><span class="publishDate">Last Published: 2013-08-12. </span></p>
			</div>
		</div>
	</div>

	<!-- Le javascript
	================================================== -->
	<!-- Placed at the end of the document so the pages load faster -->

	<!-- Fallback jQuery loading from Google CDN:
	     http://stackoverflow.com/questions/1014203/best-way-to-use-googles-hosted-jquery-but-fall-back-to-my-hosted-library-on-go -->
	<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
	<script type="text/javascript">
		if (typeof jQuery == 'undefined')
		{
			document.write(unescape("%3Cscript src='./js/jquery-1.8.3.min.js' type='text/javascript'%3E%3C/script%3E"));
		}
	</script>
	
	<script src="./js/bootstrap.min.js"></script>
	<script src="./js/lightbox.js"></script>
	<script src="./js/jquery.smooth-scroll.min.js"></script>
	<!-- back button support for smooth scroll -->
	<script src="./js/jquery.ba-bbq.min.js"></script>
	<script src="http://yandex.st/highlightjs/7.3/highlight.min.js"></script>

	<script src="./js/reflow-skin.js"></script>
	
	</body>
</html>
